// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.16.0
// source: withdrawal.sql

package repository

import (
	"context"
	"database/sql"
)

const addTxHash = `-- name: AddTxHash :exec
UPDATE
    withdrawals
SET
    tx_hash = $1
WHERE
    correlation_id = $2
`

type AddTxHashParams struct {
	TxHash        sql.NullString
	CorrelationID string
}

func (q *Queries) AddTxHash(ctx context.Context, arg *AddTxHashParams) error {
	_, err := q.exec(ctx, q.addTxHashStmt, addTxHash, arg.TxHash, arg.CorrelationID)
	return err
}

const expire = `-- name: Expire :exec
DELETE FROM
    withdrawals
WHERE
    expiry <= $1
`

func (q *Queries) Expire(ctx context.Context, expiry int64) error {
	_, err := q.exec(ctx, q.expireStmt, expire, expiry)
	return err
}

const newWithdrawal = `-- name: NewWithdrawal :exec
INSERT INTO
    withdrawals (correlation_id, wallet_id, amount, fee, expiry)
VALUES
    ($1, $2, $3, $4, $5)
`

type NewWithdrawalParams struct {
	CorrelationID string
	WalletID      int32
	Amount        string
	Fee           string
	Expiry        int64
}

func (q *Queries) NewWithdrawal(ctx context.Context, arg *NewWithdrawalParams) error {
	_, err := q.exec(ctx, q.newWithdrawalStmt, newWithdrawal,
		arg.CorrelationID,
		arg.WalletID,
		arg.Amount,
		arg.Fee,
		arg.Expiry,
	)
	return err
}
