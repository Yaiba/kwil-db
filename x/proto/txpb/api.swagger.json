{
  "swagger": "2.0",
  "info": {
    "title": "kwil/txsvc/broadcast.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "TxService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v0/broadcast": {
      "post": {
        "operationId": "TxService_Broadcast",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/txsvcBroadcastResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/txsvcBroadcastRequest"
            }
          }
        ],
        "tags": [
          "TxService"
        ]
      }
    },
    "/api/v0/{id}/executables": {
      "get": {
        "operationId": "TxService_GetExecutablesById",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/txsvcGetExecutablesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "TxService"
        ]
      }
    },
    "/api/v0/{id}/schema": {
      "get": {
        "operationId": "TxService_GetSchemaById",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/txsvcGetSchemaResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "TxService"
        ]
      }
    },
    "/api/v0/{owner}/databases": {
      "get": {
        "operationId": "TxService_ListDatabases",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/txsvcListDatabasesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "owner",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "TxService"
        ]
      }
    },
    "/api/v0/{owner}/{name}/executables": {
      "get": {
        "operationId": "TxService_GetExecutables",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/txsvcGetExecutablesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "owner",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "TxService"
        ]
      }
    },
    "/api/v0/{owner}/{name}/schema": {
      "get": {
        "operationId": "TxService_GetSchema",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/txsvcGetSchemaResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "owner",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "TxService"
        ]
      }
    }
  },
  "definitions": {
    "commonArg": {
      "type": "object",
      "properties": {
        "position": {
          "type": "integer",
          "format": "int64"
        },
        "static": {
          "type": "boolean"
        },
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/commonDataType"
        },
        "modifier": {
          "$ref": "#/definitions/commonModifierType"
        }
      }
    },
    "commonAttribute": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/commonAttributeType"
        },
        "value": {
          "type": "string"
        }
      }
    },
    "commonAttributeType": {
      "type": "string",
      "enum": [
        "INVALID_ATTRIBUTE",
        "PRIMARY_KEY",
        "UNIQUE",
        "NOT_NULL",
        "DEFAULT",
        "MIN",
        "MAX",
        "MIN_LENGTH",
        "MAX_LENGTH"
      ],
      "default": "INVALID_ATTRIBUTE"
    },
    "commonColumn": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/commonDataType"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonAttribute"
          }
        }
      }
    },
    "commonComparisonOperator": {
      "type": "string",
      "enum": [
        "OPERATOR_INVALID",
        "OPERATOR_EQUAL",
        "OPERATOR_NOT_EQUAL",
        "OPERATOR_GREATER_THAN",
        "OPERATOR_GREATER_THAN_OR_EQUAL",
        "OPERATOR_LESS_THAN",
        "OPERATOR_LESS_THAN_OR_EQUAL"
      ],
      "default": "OPERATOR_INVALID"
    },
    "commonDataType": {
      "type": "string",
      "enum": [
        "INVALID_TYPE",
        "STRING",
        "INT32",
        "INT64",
        "BOOLEAN"
      ],
      "default": "INVALID_TYPE"
    },
    "commonDatabase": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "owner": {
          "type": "string"
        },
        "tables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonTable"
          }
        },
        "sqlQueries": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonSQLQuery"
          }
        },
        "roles": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonRole"
          }
        },
        "indexes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonIndex"
          }
        }
      }
    },
    "commonExecutable": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "statement": {
          "type": "string"
        },
        "userInputs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonUserInput"
          }
        },
        "args": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonArg"
          }
        }
      }
    },
    "commonIndex": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "table": {
          "type": "string"
        },
        "columns": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "using": {
          "$ref": "#/definitions/commonIndexType"
        }
      }
    },
    "commonIndexType": {
      "type": "string",
      "enum": [
        "INVALID_INDEX",
        "BTREE"
      ],
      "default": "INVALID_INDEX"
    },
    "commonModifierType": {
      "type": "string",
      "enum": [
        "NO_MODIFIER",
        "CALLER"
      ],
      "default": "NO_MODIFIER"
    },
    "commonParameter": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "column": {
          "type": "string"
        },
        "static": {
          "type": "boolean"
        },
        "value": {
          "type": "string"
        },
        "modifier": {
          "$ref": "#/definitions/commonModifierType"
        }
      }
    },
    "commonPayloadType": {
      "type": "string",
      "enum": [
        "INVALID_PAYLOAD_TYPE",
        "DEPLOY_DATABASE",
        "MODIFY_DATABASE",
        "DELETE_DATABASE",
        "EXECUTE_QUERY",
        "WITHDRAW"
      ],
      "default": "INVALID_PAYLOAD_TYPE"
    },
    "commonQueryType": {
      "type": "string",
      "enum": [
        "QUERY_INVALID",
        "QUERY_INSERT",
        "QUERY_UPDATE",
        "QUERY_DELETE"
      ],
      "default": "QUERY_INVALID"
    },
    "commonRole": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "default": {
          "type": "boolean"
        },
        "permissions": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "commonSQLQuery": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/commonQueryType"
        },
        "table": {
          "type": "string"
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonParameter"
          }
        },
        "where": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonWhereClause"
          }
        }
      }
    },
    "commonSignature": {
      "type": "object",
      "properties": {
        "signatureBytes": {
          "type": "string",
          "format": "byte"
        },
        "signatureType": {
          "$ref": "#/definitions/commonSignatureType"
        }
      }
    },
    "commonSignatureType": {
      "type": "string",
      "enum": [
        "INVALID_SINATURE_TYPE",
        "PK_SECP256K1_UNCOMPRESSED",
        "ACCOUNT_SECP256K1_UNCOMPRESSED",
        "END_SIGNATURE_TYPE"
      ],
      "default": "INVALID_SINATURE_TYPE"
    },
    "commonTable": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "columns": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonColumn"
          }
        }
      }
    },
    "commonTx": {
      "type": "object",
      "properties": {
        "hash": {
          "type": "string",
          "format": "byte"
        },
        "payloadType": {
          "$ref": "#/definitions/commonPayloadType"
        },
        "payload": {
          "type": "string",
          "format": "byte"
        },
        "nonce": {
          "type": "string",
          "format": "int64"
        },
        "signature": {
          "$ref": "#/definitions/commonSignature"
        },
        "fee": {
          "type": "string"
        },
        "sender": {
          "type": "string"
        }
      }
    },
    "commonUserInput": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      }
    },
    "commonWhereClause": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "column": {
          "type": "string"
        },
        "static": {
          "type": "boolean"
        },
        "value": {
          "type": "string"
        },
        "modifier": {
          "$ref": "#/definitions/commonModifierType"
        },
        "operator": {
          "$ref": "#/definitions/commonComparisonOperator"
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "txsvcBroadcastRequest": {
      "type": "object",
      "properties": {
        "tx": {
          "$ref": "#/definitions/commonTx"
        }
      }
    },
    "txsvcBroadcastResponse": {
      "type": "object",
      "properties": {
        "hash": {
          "type": "string",
          "format": "byte"
        },
        "fee": {
          "type": "string"
        }
      }
    },
    "txsvcGetExecutablesResponse": {
      "type": "object",
      "properties": {
        "executables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commonExecutable"
          }
        }
      }
    },
    "txsvcGetSchemaResponse": {
      "type": "object",
      "properties": {
        "database": {
          "$ref": "#/definitions/commonDatabase"
        }
      }
    },
    "txsvcListDatabasesResponse": {
      "type": "object",
      "properties": {
        "databases": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}
